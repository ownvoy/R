### statistical transformations
__ggplot2__ 에 있는 `diamonds` 데이터를 이용해보도록 한다 
`diamonds`는 `price`, `carrot`, `color`, `clarity` 등의 정보가 있다
```r
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut))
```
![Rplot](https://user-images.githubusercontent.com/96481582/147472621-66cec64c-2421-484b-bb7c-3c46073b3322.png)

>y축 __count__ 에 대한 정보는 __diamonds__ 에 존재하지 않는다

__bar_chart__ 가 새로운 변수(__count__)을 만든 것이다
이렇게 새로운 변수가 만들어지는 알고리즘을 __stat__ 이라고 한다
~~실제로 `geom_bar()` 을 잘 살펴보면 `stat_count`를 이용한다~~
<br>
```r
ggplot(data = diamonds) + 
  stat_count(mapping = aes(x = cut))
```
똑같은 결과를 내놓는다

이렇게 내부에 있는 stat을 명시적으로 써야되는 이유가 있는데   
다음과 같다   
<br>
__1.stat을 새롭게 바꾸고 싶을 수 있기 때문이다__

```r
demo <- tribble(
  ~cut,         ~freq,
  "Fair",       1610,
  "Good",       4906,
  "Very Good",  12082,
  "Premium",    13791,
  "Ideal",      21551
)
ggplot(data = demo) +
  geom_bar(mapping = aes(x = cut, y = freq), stat = "identity")
```
__geom_bar__ 의 stat을 __count__ 에서 __identity__ 로 변경하였다
이로써 __$y$ 의 frequency__ 값으로 표현 할 수 있게 됐다

__2.  statistical transformation에 집중을 시키기기 위해서이다__
```r
ggplot(data = diamonds) + 
  stat_summary(
    mapping = aes(x = cut, y = depth),
    fun.min = min,
    fun.max = max,
    fun = median
  )
```
![Rplot01](https://user-images.githubusercontent.com/96481582/147493029-5348fe98-394c-4ba6-8268-b402e77c76ca.png)
~~근데 이게 왜 집중을 시키는 건지 모르겠다. 또 그게 왜 stat을 명시적으로 써야 하는지 잘 모르겠다~~  
<br>
<br>

### Position adjustment
__bar_chart__ 를 색칠 할 수도 있다
```r
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, colour = cut))
  ```
![Rplot02](https://user-images.githubusercontent.com/96481582/147493645-e3e6534c-153f-4a82-a480-fe52da3cd137.png)

```r 
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = cut))
```
__이러면 속까지 채워진다__
__cut__ 이 아닌 다른 변수들로 채울 수도 있다
```r
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity))
```
![Rplot03](https://user-images.githubusercontent.com/96481582/147494860-ffe4a266-9469-4ebe-b1f3-021f25d2df65.png)

__position adjustment__ 에 의해 bar들이 쌓아진다
다른 방식으로도 쌓기가 가능한데 `"Identity"`,`"Dodge"`, `"fill"`이 있다  
<br>

#### "Identity"
`position = "identity"`는 실제 값에 대응하게 한다.
그래서 __bar chart__ 에는 좋지 못하다.
영역들이 겹칠 수 있기 때문이다.
이는 다음과 같이 확인 할 수 있다
```r
ggplot(data = diamonds, mapping = aes(x = cut, colour = clarity)) + 
  geom_bar(fill = NA, position = "identity")
  ```
![Rplot01](https://user-images.githubusercontent.com/96481582/147549691-9aef9b19-c755-4864-9df8-ee501b1ff547.png)
<br>

### "Dodge" 
`position = "dodge"`는 각각을 옆에 배치 한다.  
```r
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = "dodge")
  ```
   ![Rplot04](https://user-images.githubusercontent.com/96481582/147550288-19abf134-3ed6-4c9f-a625-5bf873b6b178.png)
<br>


### "Fill"
`position = "fill"`은 각각의 비율을 알기 쉽게 해준다.
```r
ggplot(data = diamonds) + 
  geom_bar(mapping = aes(x = cut, fill = clarity), position = "fill")
  ```
![Rplot05](https://user-images.githubusercontent.com/96481582/147550991-583dd36b-d785-4548-a2c7-4d09bc83c1a8.png)





